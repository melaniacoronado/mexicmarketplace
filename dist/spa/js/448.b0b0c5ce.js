"use strict";(self["webpackChunkmacodesgin"]=self["webpackChunkmacodesgin"]||[]).push([[448],{8448:(a,e,t)=>{t.r(e),t.d(e,{default:()=>Y});var d=t(3673),l=t(2323);const c=a=>((0,d.dD)("data-v-069a86d4"),a=a(),(0,d.Cn)(),a),n={class:"tools q-pb-xl"},s={class:"header"},i={class:"titulo"},r={id:"estatus-pagina"},o={class:"content"},u={class:"seguimiento"},p=c((()=>(0,d._)("h4",{class:"text-primary no-padding"},"Actualizaciones",-1))),f={class:"figura"},h={class:"circulo"},v=c((()=>(0,d._)("div",{class:"linea"},null,-1))),m={class:"circulo"},b=c((()=>(0,d._)("div",{class:"linea"},null,-1))),g={class:"circulo"},_=c((()=>(0,d._)("div",{class:"linea"},null,-1))),E={class:"circulo"},F={class:"fecha procesada"},y=c((()=>(0,d._)("b",null,"Procesada ",-1))),z={class:"fecha fabricada"},k=c((()=>(0,d._)("b",null,"Fabricada ",-1))),P={class:"fecha enviada"},w=c((()=>(0,d._)("b",null,"Enviada ",-1))),x={class:"fecha entregada"},I=c((()=>(0,d._)("b",null,"Entregado ",-1))),C={class:"actualizar-estatus"},S=c((()=>(0,d._)("h4",{class:"text-primary no-padding"},"Actualizar estatus",-1))),D={class:"opciones"};function W(a,e,t,c,W,q){const Z=(0,d.up)("q-btn"),V=(0,d.up)("q-icon"),A=(0,d.up)("q-select"),Q=(0,d.up)("q-input"),T=(0,d.up)("q-page");return(0,d.wg)(),(0,d.j4)(T,null,{default:(0,d.w5)((()=>[(0,d._)("div",n,[(0,d._)("div",s,[(0,d._)("div",i,"InformaciÃ³n del pedido #"+(0,l.zw)(a.state.ordenCompraID),1),(0,d.Wm)(Z,{flat:"",color:"primary",label:"Regresar",onClick:e[0]||(e[0]=a=>this.$router.push("/pedidos"))})])]),(0,d._)("div",r,[(0,d._)("div",o,[(0,d._)("div",u,[p,(0,d._)("div",f,[(0,d._)("div",h,[(0,d.Wm)(V,{name:1==a.state.procesada?"check":"circle",size:a.state.procesada?"50px":"30px"},null,8,["name","size"])]),v,(0,d._)("div",m,[(0,d.Wm)(V,{name:1==a.state.fabricada?"check":"circle",size:a.state.fabricada?"50px":"30px"},null,8,["name","size"])]),b,(0,d._)("div",g,[(0,d.Wm)(V,{name:1==a.state.enviada?"check":"circle",size:a.state.enviada?"50px":"30px"},null,8,["name","size"])]),_,(0,d._)("div",E,[(0,d.Wm)(V,{name:1==a.state.entregada?"check":"circle",size:a.state.entregada?"50px":"30px"},null,8,["name","size"])]),(0,d._)("div",F,[y,(0,d._)("span",null,(0,l.zw)(a.state.fechaProcesada?a.formatter(a.state.fechaProcesada):"pendiente"),1)]),(0,d._)("div",z,[k,(0,d._)("span",null,(0,l.zw)(a.state.fechaFabricada?a.formatter(a.state.fechaFabricada):"pendiente"),1)]),(0,d._)("div",P,[w,(0,d._)("span",null,(0,l.zw)(a.state.fechaEnviada?a.formatter(a.state.fechaEnviada):"pendiente"),1)]),(0,d._)("div",x,[I,(0,d._)("span",null,(0,l.zw)(a.state.fechaEntregada?a.formatter(a.state.fechaEntregada):"pendiente"),1)])])]),(0,d._)("div",C,[S,(0,d._)("div",D,[(0,d.Wm)(A,{filled:"",dense:"",modelValue:a.state.estatusSeleccionado,"onUpdate:modelValue":e[1]||(e[1]=e=>a.state.estatusSeleccionado=e),options:a.tiposEstatus,label:"Estatus"},null,8,["modelValue","options"]),(0,d.Wm)(Q,{dense:"",modelValue:a.state.nuevaFecha,"onUpdate:modelValue":e[2]||(e[2]=e=>a.state.nuevaFecha=e),filled:"",type:"date"},null,8,["modelValue"]),(0,d.Wm)(Z,{color:"primary",label:"Actualizar",onClick:e[3]||(e[3]=e=>a.cambiarEstatus()),disabled:null==a.state.estatusSeleccionado},null,8,["disabled"])])])])])])),_:1})}var q=t(1959),Z=t(9582),V=t(5474);const A=(0,d.aZ)({name:"EstatusPedido",name:"PageIndex",setup(){const a=(0,Z.yj)(),e=(0,d.Fl)((()=>a.params.id)).value;let t=[{value:1,label:"Fabricada"},{value:2,label:"Enviada"},{value:3,label:"Entregada"}];const l=(0,q.qj)({ordenCompraID:e,procesada:!1,fechaProcesada:null,fabricada:!1,fechaFabricada:null,enviada:!1,fechaEnviada:null,entregada:!1,fechaEntregada:null,estatusSeleccionado:null,nuevaFecha:null});function c(a){if(null==a)return null;let e=new Date(a);e.setDate(e.getDate()+1);let t=e.getDate(),d=e.getFullYear(),l=e.getMonth()+1;return t<10&&(t="0"+t),l<10&&(l="0"+l),t+"-"+l+"-"+d}async function n(){await V.api.get(`/OrdenCompra/${e}`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((a=>{l.procesada=a.data.payload.procesada,l.fechaProcesada=a.data.payload.fechaProcesada.split("T")[0],l.fabricada=a.data.payload.fabricada,l.fechaFabricada=void 0==a.data.payload.fechaFabricada?null:a.data.payload.fechaFabricada.split("T")[0],l.enviada=a.data.payload.enviada,l.fechaEnviada=void 0==a.data.payload.fechaEnviada?null:a.data.payload.fechaEnviada.split("T")[0],l.entregada=a.data.payload.entregada,l.fechaEntregada=void 0==a.data.payload.fechaEntregada?null:a.data.payload.fechaEntregada.split("T")[0]}))}async function s(){if(null==l.estatusSeleccionado)return;if(null==l.nuevaFecha)return;let a=l.nuevaFecha;switch(l.estatusSeleccionado.value){case 0:l.procesada=!0,l.fechaProcesada=a;break;case 1:l.fabricada=!0,l.fechaFabricada=a;break;case 2:l.enviada=!0,l.fechaEnviada=a;break;case 3:l.entregada=!0,l.fechaEntregada=a;break}await(0,V.api)({url:"/OrdenCompra",method:"PUT",data:{OrdenCompraID:parseInt(e),FechaProcesada:l.fechaProcesada,FechaFabricada:l.fechaFabricada,FechaEnviada:l.fechaEnviada,FechaEntregada:l.fechaEntregada,Procesada:l.procesada,Fabricada:l.fabricada,Enviada:l.enviada,Entregada:l.entregada},headers:{Authorization:"Bearer "+localStorage.getItem("token")}})}return(0,d.bv)((async()=>{n()})),{state:l,tiposEstatus:t,cambiarEstatus:s,formatter:c}}});var Q=t(4260),T=t(4379),j=t(8240),B=t(4554),O=t(8516),U=t(4842),$=t(7518),M=t.n($);const R=(0,Q.Z)(A,[["render",W],["__scopeId","data-v-069a86d4"]]),Y=R;M()(A,"components",{QPage:T.Z,QBtn:j.Z,QIcon:B.Z,QSelect:O.Z,QInput:U.Z})}}]);